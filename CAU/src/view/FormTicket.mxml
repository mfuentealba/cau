<?xml version="1.0" encoding="utf-8"?>
<s:Scroller xmlns:fx="http://ns.adobe.com/mxml/2009"
	xmlns:s="library://ns.adobe.com/flex/spark"
	xmlns:mx="library://ns.adobe.com/flex/mx"
	xmlns:controllerbd="services.controllerbd.*">
	<fx:Script>
		<![CDATA[
			import controller.Controller;
			
			import event.ClienteEvent;
			
			import model.ModelApp;
			
			import spark.events.GridEvent;
		
			
			
			import vo.ClienteVO;
			
			[Bindable] public var clienteVO:ClienteVO = new ClienteVO();
			[Bindable] private var modelApp:ModelApp = ModelApp.getInstance();
			
			protected function fnOperarCliente(evento:MouseEvent):void
			{
				// TODO Auto-generated method stub
				var clienteEvent:ClienteEvent;
				switch(evento.target){
					case btnEnviar:
						if(btnEnviar.label == 'Crear'){
							clienteEvent = new ClienteEvent(ClienteEvent.CREAR, clienteVO, fnNuevoCliente);						
						} else {
							clienteEvent = new ClienteEvent(ClienteEvent.MODIFICAR, clienteVO);
						}
						
						break;
					
				}
				
				Controller.getInstance().dispatchEvent(clienteEvent);
			}			
			
			protected function fnNuevoCliente(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				clienteVO = new ClienteVO();
				btnEnviar.label = 'Crear';
			}
			
			
			
			
			
			protected function fnFiltrarCliente(event:*):void
			{
				// TODO Auto-generated method stub
				modelApp.arrClientes.refresh();
			}
			
			
		]]>
	</fx:Script>
	<fx:Binding source="txtRut.text" destination="clienteVO.rut" twoWay="true"/>
	<fx:Binding source="txtNombres.text" destination="clienteVO.nombres" twoWay="true"/>
	<fx:Binding source="txtApellidos.text" destination="clienteVO.apellidos" twoWay="true"/>
	<fx:Binding source="txtEmail.text" destination="clienteVO.email" twoWay="true"/>
	<fx:Binding source="cmbSucursal.selectedItem" destination="clienteVO.sucursalVO" twoWay="true"/>
	<fx:Binding source="txtTelefono.text" destination="clienteVO.telefono" twoWay="true"/>
	<fx:Binding source="txtAnexo.text" destination="clienteVO.anexo" twoWay="true"/>
	<fx:Binding source="txtUnidad.text" destination="clienteVO.unidad" twoWay="true"/>
	<fx:Binding source="txtRotulo.text" destination="clienteVO.rotulo" twoWay="true"/>
	<fx:Binding source="txtIp.text" destination="clienteVO.dir_ip" twoWay="true"/>
	<fx:Binding source="txtGerencia.text" destination="clienteVO.gerencia" twoWay="true"/>
	<fx:Binding source="txtEmpresa.text" destination="clienteVO.empresa" twoWay="true"/>
	<s:Group 
		width="100%" height="100%" xmlns:skins="assets.skins.*" xmlns:components="components.*"
		>
		
		<s:layout>
			<s:HorizontalLayout/>
		</s:layout>
		<components:CustomPanelSpark title="Clientes" width="400" color="#eeeeee" imgBl="true">
			<s:Form width="100%">
				<s:layout>
					<s:TileLayout requestedColumnCount="4"/>
				</s:layout>
				<s:FormItem label="Rut" width="100%" height="30">
					<s:TextInput id="txtRut" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Nombres" width="100%" height="30">
					<s:TextInput id="txtNombres" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Apellidos" width="100%" height="30">
					<s:TextInput id="txtApellidos" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Email" width="100%" height="30">
					<s:TextInput id="txtEmail" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Sucursal" width="100%" height="30">
					<s:ComboBox id="cmbSucursal" color="#333333" skinClass="assets.skins.ComboBoxLVSkin" dataProvider="{modelApp.arrSucursales}" labelField="sucursal" width="100%" height="30"></s:ComboBox>
				</s:FormItem>
				<s:FormItem label="Teléfono" width="100%" height="30">
					<s:TextInput id="txtTelefono" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Anexo" width="100%" height="30">
					<s:TextInput id="txtAnexo" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Unidad" width="100%" height="30">
					<s:TextInput id="txtUnidad" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Rótulo" width="100%" height="30">
					<s:TextInput id="txtRotulo" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Dirección ip" width="100%" height="30">
					<s:TextInput id="txtIp" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Gerencia" width="100%" height="30">
					<s:TextInput id="txtGerencia" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="Empresa" width="100%" height="30">
					<s:TextInput id="txtEmpresa" width="100%" height="30"/>
				</s:FormItem>
				<s:FormItem label="" width="100%" height="50">
					<s:Button id="btnEnviar" color="white" fontWeight="bold" label="{clienteVO.id == '' ? 'Crear' : 'Actualizar'}" click="fnOperarCliente(event)" width="100%" height="50" skinClass="assets.skins.ButtonSendLVSkin"/>
				</s:FormItem>
				
			</s:Form>	
		</components:CustomPanelSpark>
		
		
		
	</s:Group>	
</s:Scroller>

